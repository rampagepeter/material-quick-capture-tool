# 配置管理指南

## 概述

素材快捷投递工具现在支持配置的导入和导出功能，方便团队成员快速配置和使用应用。

## 主要功能

### 🚀 配置导出
- **功能**：将当前应用的所有配置导出为JSON文件
- **包含内容**：
  - 飞书应用配置（App ID、App Secret）
  - 提交者姓名
  - 快捷键设置
  - 所有表格配置和字段映射

### 📥 配置导入
- **功能**：从配置文件快速恢复应用设置
- **特点**：
  - 一键导入所有配置
  - 自动验证配置文件格式
  - 导入前确认操作
  - 保留当前表格选择状态

### 🧹 数据管理
- **清除缓存**：清理临时数据，不影响配置
- **重置配置**：恢复所有设置为默认值

## 使用流程

### 管理员配置流程

1. **完整配置应用**
   - 配置飞书应用信息
   - 添加所需的表格配置
   - 设置字段映射
   - 测试功能正常

2. **导出配置**
   - 进入"设置"标签页
   - 点击"导出配置"按钮
   - 选择保存位置
   - 将配置文件分享给团队成员

### 团队成员使用流程

1. **获取配置文件**
   - 从管理员处获取配置文件（.json格式）

2. **导入配置**
   - 打开应用，进入"设置"标签页
   - 点击"导入配置"按钮
   - 选择配置文件
   - 确认导入操作

3. **验证配置**
   - 检查飞书连接状态
   - 验证表格配置
   - 测试功能是否正常

## 配置文件格式

导出的配置文件包含以下结构：

```json
{
  "version": "1.0.0",
  "exportTime": "2025-01-01T00:00:00.000Z",
  "config": {
    "feishuAppId": "cli_xxxxxxxxx",
    "feishuAppSecret": "xxxxxxxxx",
    "submitterName": "张三",
    "shortcuts": {
      "smartCapture": "CommandOrControl+Shift+T"
    },
    "tableConfigs": [
      {
        "name": "素材收集表",
        "appToken": "xxxxxxxxx",
        "tableId": "xxxxxxxxx",
        "fieldMapping": {
          "textField": "文本内容",
          "imageField": "图片",
          "commentField": "备注",
          "submitterField": "提交者",
          "timeField": "时间"
        }
      }
    ]
  }
}
```

## 安全注意事项

### ⚠️ 敏感信息
- 配置文件包含飞书应用的App Secret
- 请仅在可信任的团队内部分享
- 不要将配置文件上传到公共平台

### 🔒 权限管理
- 确保团队成员具有相应的飞书权限
- 图片上传需要`drive:file:upload`权限
- 表格操作需要相应的多维表格权限

## 常见问题

### Q: 导入配置后连接失败？
**A:** 检查以下项目：
- 网络连接是否正常
- 飞书应用权限是否正确配置
- App ID和App Secret是否有效

### Q: 导入后表格配置无法使用？
**A:** 可能的原因：
- 表格权限不足
- 表格已被删除或移动
- 字段名称发生变化

### Q: 如何备份当前配置？
**A:** 在导入新配置前，建议：
1. 导出当前配置作为备份
2. 记录重要的配置信息
3. 确认新配置正常后再删除备份

## 最佳实践

### 🎯 团队协作
1. **统一配置**：由管理员维护标准配置
2. **版本管理**：为配置文件添加版本标识
3. **定期更新**：及时同步配置变更

### 📋 配置管理
1. **命名规范**：使用清晰的文件名（如：`素材工具配置_v1.2_20250101.json`）
2. **文档记录**：记录配置变更和使用说明
3. **测试验证**：导入后及时测试功能

### 🔄 更新流程
1. **通知团队**：配置更新前通知相关人员
2. **逐步推广**：先在小范围测试，再全面推广
3. **问题反馈**：建立问题反馈和解决机制

## 技术支持

如遇到问题，请检查：
1. 应用版本是否最新
2. 配置文件格式是否正确
3. 网络和权限设置是否正常

---

*最后更新：2025年1月* 