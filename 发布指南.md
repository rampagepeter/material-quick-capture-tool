# ç´ æå¿«æ·æŠ•é€’å·¥å…· - å‘å¸ƒæŒ‡å—

## ğŸ“¦ æ‰“åŒ…å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn
- electron-builder å·²é…ç½®

### 2. æ„å»ºèµ„æºå‡†å¤‡

#### å›¾æ ‡æ–‡ä»¶ï¼ˆéœ€è¦å‡†å¤‡ï¼‰
```
build/
â”œâ”€â”€ icon.icns          # macOS å›¾æ ‡ (512x512)
â”œâ”€â”€ icon.ico           # Windows å›¾æ ‡ (256x256)
â”œâ”€â”€ icon.png           # Linux å›¾æ ‡ (512x512)
â”œâ”€â”€ background.png     # DMG èƒŒæ™¯å›¾ (540x380)
â””â”€â”€ entitlements.mac.plist  # macOS æƒé™é…ç½® âœ…
```

#### å›¾æ ‡åˆ¶ä½œå»ºè®®
- **macOS (.icns)**ï¼šä½¿ç”¨ `iconutil` å‘½ä»¤ä» PNG ç”Ÿæˆ
- **Windows (.ico)**ï¼šä½¿ç”¨åœ¨çº¿å·¥å…·æˆ– ImageMagick
- **Linux (.png)**ï¼šç›´æ¥ä½¿ç”¨ 512x512 çš„ PNG æ–‡ä»¶

## ğŸš€ æ‰“åŒ…å‘½ä»¤

### å¼€å‘æµ‹è¯•æ‰“åŒ…
```bash
# ä»…æ‰“åŒ…ä¸å‹ç¼©ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
npm run pack

# æ„å»ºæ‰€æœ‰å¹³å°
npm run build
```

### ç”Ÿäº§å‘å¸ƒæ‰“åŒ…
```bash
# macOS
npm run dist:mac

# Windows
npm run dist:win

# Linux
npm run dist:linux

# æ‰€æœ‰å¹³å°
npm run dist
```

## ğŸ“‹ æ‰“åŒ…è¾“å‡º

### æ–‡ä»¶ç»“æ„
```
dist/
â”œâ”€â”€ mac/
â”‚   â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-mac-x64.dmg
â”‚   â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-mac-arm64.dmg
â”œâ”€â”€ win/
â”‚   â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-win-x64.exe
â”‚   â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-win-ia32.exe
â”‚   â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-setup.exe
â””â”€â”€ linux/
    â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-linux-x64.AppImage
    â””â”€â”€ ç´ æå¿«æ·æŠ•é€’å·¥å…·-1.0.0-linux-x64.deb
```

### æ–‡ä»¶è¯´æ˜
- **DMG**: macOS ç£ç›˜æ˜ åƒï¼Œç”¨æˆ·åŒå‡»å®‰è£…
- **EXE**: Windows å®‰è£…ç¨‹åºï¼Œå¼•å¯¼ç”¨æˆ·å®‰è£…
- **AppImage**: Linux ä¾¿æºç‰ˆï¼Œæ— éœ€å®‰è£…ç›´æ¥è¿è¡Œ
- **DEB**: Debian/Ubuntu åŒ…ç®¡ç†å™¨å®‰è£…åŒ…

## ğŸ”§ æ‰“åŒ…é…ç½®è¯´æ˜

### å…³é”®é…ç½®é¡¹
```json
{
  "build": {
    "appId": "com.materialquickcapture.app",
    "productName": "ç´ æå¿«æ·æŠ•é€’å·¥å…·",
    "compression": "maximum",
    "files": [
      "src/**/*",
      "renderer/**/*",
      "node_modules/**/*",
      "package.json"
    ]
  }
}
```

### å¹³å°ç‰¹å®šé…ç½®
- **macOS**: æ”¯æŒ Intel å’Œ Apple Silicon
- **Windows**: æ”¯æŒ 64ä½ å’Œ 32ä½
- **Linux**: æ”¯æŒ AppImage å’Œ DEB åŒ…

## ğŸ”’ ä»£ç ç­¾åï¼ˆå¯é€‰ï¼‰

### macOS ç­¾å
```bash
# éœ€è¦ Apple Developer è´¦æˆ·
export CSC_LINK="path/to/certificate.p12"
export CSC_KEY_PASSWORD="certificate_password"
npm run dist:mac
```

### Windows ç­¾å
```bash
# éœ€è¦ä»£ç ç­¾åè¯ä¹¦
export CSC_LINK="path/to/certificate.p12"
export CSC_KEY_PASSWORD="certificate_password"
npm run dist:win
```

## ğŸ“¤ å‘å¸ƒæµç¨‹

### 1. ç‰ˆæœ¬å‡†å¤‡
```bash
# æ›´æ–°ç‰ˆæœ¬å·
npm version patch  # 1.0.0 -> 1.0.1
npm version minor  # 1.0.0 -> 1.1.0
npm version major  # 1.0.0 -> 2.0.0
```

### 2. æ„å»ºæµ‹è¯•
```bash
# æœ¬åœ°æµ‹è¯•
npm run pack
# æµ‹è¯•æ‰“åŒ…åçš„åº”ç”¨

# å®Œæ•´æ„å»º
npm run dist
```

### 3. å‘å¸ƒæ£€æŸ¥æ¸…å•
- [ ] åŠŸèƒ½æµ‹è¯•å®Œæˆ
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] æ›´æ–°æ—¥å¿—å·²ç¼–å†™
- [ ] å›¾æ ‡æ–‡ä»¶å·²å‡†å¤‡
- [ ] æ„å»ºæˆåŠŸæ— é”™è¯¯
- [ ] å®‰è£…åŒ…æµ‹è¯•æ­£å¸¸
- [ ] æ–‡æ¡£å·²æ›´æ–°

### 4. å‘å¸ƒæ¸ é“
- **GitHub Releases**: ä¸»è¦å‘å¸ƒæ¸ é“
- **å›¢é˜Ÿå†…éƒ¨**: ç›´æ¥åˆ†å‘å®‰è£…åŒ…
- **å®˜æ–¹ç½‘ç«™**: ä¸‹è½½é¡µé¢ï¼ˆå¦‚æœæœ‰ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ‰“åŒ…å¤±è´¥ï¼Œæç¤ºç¼ºå°‘å›¾æ ‡ï¼Ÿ
**A**: éœ€è¦å‡†å¤‡å¯¹åº”å¹³å°çš„å›¾æ ‡æ–‡ä»¶ï¼š
- macOS: `build/icon.icns`
- Windows: `build/icon.ico`
- Linux: `build/icon.png`

### Q: macOS æç¤ºåº”ç”¨å·²æŸåï¼Ÿ
**A**: éœ€è¦ä»£ç ç­¾åï¼Œæˆ–è€…ç”¨æˆ·éœ€è¦åœ¨"å®‰å…¨æ€§ä¸éšç§"ä¸­å…è®¸è¿è¡Œã€‚

### Q: Windows æç¤ºä¸å—ä¿¡ä»»çš„å‘å¸ƒè€…ï¼Ÿ
**A**: éœ€è¦ä»£ç ç­¾åè¯ä¹¦ï¼Œæˆ–è€…ç”¨æˆ·éœ€è¦ç‚¹å‡»"æ›´å¤šä¿¡æ¯"â†’"ä»è¦è¿è¡Œ"ã€‚

### Q: Linux æ— æ³•è¿è¡Œ AppImageï¼Ÿ
**A**: éœ€è¦ç»™æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ï¼š`chmod +x *.AppImage`

## ğŸ“Š æ–‡ä»¶å¤§å°ä¼˜åŒ–

### å½“å‰é…ç½®ä¼˜åŒ–
- æ’é™¤å¼€å‘æ–‡ä»¶å’Œæµ‹è¯•æ–‡ä»¶
- æœ€å¤§å‹ç¼©è®¾ç½®
- æ’é™¤ä¸å¿…è¦çš„ node_modules

### é¢„æœŸæ–‡ä»¶å¤§å°
- **macOS DMG**: ~150-200MB
- **Windows EXE**: ~120-180MB
- **Linux AppImage**: ~140-190MB

## ğŸ”„ è‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆè¿›é˜¶ï¼‰

### GitHub Actions ç¤ºä¾‹
```yaml
name: Build and Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    
    steps:
    - uses: actions/checkout@v2
    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '18'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Build
      run: npm run dist
    
    - name: Upload artifacts
      uses: actions/upload-artifact@v2
      with:
        name: dist-${{ matrix.os }}
        path: dist/
```

## ğŸ“‹ å‘å¸ƒåæ£€æŸ¥

### ç”¨æˆ·åé¦ˆæ”¶é›†
- å®‰è£…æˆåŠŸç‡
- åŠŸèƒ½ä½¿ç”¨æƒ…å†µ
- é”™è¯¯æŠ¥å‘Š
- æ€§èƒ½è¡¨ç°

### ç›‘æ§æŒ‡æ ‡
- ä¸‹è½½é‡ç»Ÿè®¡
- å¹³å°åˆ†å¸ƒ
- ç‰ˆæœ¬ä½¿ç”¨æƒ…å†µ
- ç”¨æˆ·ç•™å­˜ç‡

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **è‡ªåŠ¨æ›´æ–°**: é›†æˆ electron-updater
2. **é”™è¯¯æ”¶é›†**: é›†æˆ Sentry æˆ–ç±»ä¼¼æœåŠ¡
3. **ä½¿ç”¨ç»Ÿè®¡**: é›†æˆåŒ¿åä½¿ç”¨ç»Ÿè®¡
4. **å¤šè¯­è¨€**: æ”¯æŒè‹±æ–‡ç­‰å…¶ä»–è¯­è¨€

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨æ‰“åŒ…æˆ–å‘å¸ƒè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥ Node.js å’Œ npm ç‰ˆæœ¬
2. æ¸…ç†ç¼“å­˜ï¼š`npm cache clean --force`
3. é‡æ–°å®‰è£…ä¾èµ–ï¼š`rm -rf node_modules && npm install`
4. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
5. å‚è€ƒ electron-builder å®˜æ–¹æ–‡æ¡£ 